<!doctype html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Config EDM</title>
  <link rel="stylesheet" href="assets/css/config.css" />
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/theme/monokai.min.css" />
</head>
<body>
  <header class="topbar">
    <div class="left">
      <span id="breadcrumb" class="breadcrumb" title="No folder">No folder</span>
    </div>
    <div class="right">
      <span id="campaignCountIndicator" title="Occurrences in XML">0/7</span>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <div class="sidebar-header">
        <button id="openFolderBtn" class="btn" title="Open Folder">
          <i class="fa-solid fa-folder-open"></i> Open Folder
        </button>
        <button id="refreshTreeBtn" class="btn secondary" title="Refresh">
          <i class="fa-solid fa-refresh"></i>
        </button>
      </div>
      <div class="sidebar-body">
        <div id="fileTree" class="file-tree"></div>
      </div>
      <div class="resize-handle" id="resizeHandle"></div>
    </aside>
    <section class="content">
      <div class="controls">
        <div class="field">
          <label for="campaignId">Campaign ID</label>
          <div class="control">
            <input id="campaignId" type="text" placeholder="YYYYMMDD_nama-campaign_XXXX" />
            <span id="campaignIdCharCount" class="muted">(0)</span>
            <span id="campaignIdCheckmark" class="status" style="display:none"></span>
          </div>
        </div>

        <div class="field">
          <label for="subject">Subject</label>
          <div class="control">
            <input id="subject" type="text" placeholder="Subject with <%[KRHRED_Unit_XX]|%>" />
            <span id="subjectCharCount" class="muted">(0)</span>
            <span id="subjectCheckmark" class="status" style="display:none"></span>
          </div>
        </div>

        <div class="field">
          <label for="link">Link</label>
          <div class="control">
            <input id="link" type="text" placeholder="http://example.com/1450-anything" />
            <span id="mismatchWarning" class="warn" style="display:none">Mismatch!</span>
            <span id="linkCheckmark" class="status" style="display:none"></span>
          </div>
        </div>

        <div class="buttons">
          <button id="applyUpdateBtn" class="btn"><i class="fa-solid fa-wand-magic-sparkles"></i> Apply Update</button>
          <button id="saveFileBtn" class="btn success" title="Save current XML"><i class="fa-solid fa-floppy-disk"></i> Save</button>

          <button id="updateCampaignIdBtn" class="btn"><i class="fa-solid fa-hashtag"></i> Update Campaign ID</button>
          <button id="updateSubjectBtn"   class="btn"><i class="fa-solid fa-envelope"></i> Update Subject</button>
          <button id="updateLinkBtn"      class="btn"><i class="fa-solid fa-link"></i> Update Link</button>
        </div>
      </div>

      <textarea id="editor" class="editor" aria-label="XML editor"></textarea>
    </section>
  </main>

  <div id="overlay" class="overlay" hidden>
    <div class="spinner" role="status" aria-label="Loading">
      <i class="fa-solid fa-rotate fa-spin"></i>
      <div>Loadingâ€¦</div>
    </div>
  </div>

  <!-- Save Changes Modal -->
  <div id="saveChangesModal" class="modal" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <h3>Simpan Perubahan</h3>
        <button class="modal-close" id="modalCloseBtn">&times;</button>
      </div>
      <div class="modal-body">
        <p>Ada perubahan yang belum disimpan. Simpan perubahan ke file?</p>
      </div>
      <div class="modal-footer">
        <button class="btn secondary" id="cancelModalBtn">Batal</button>
        <button class="btn primary" id="saveChangesBtn">Simpan</button>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/codemirror.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/mode/xml/xml.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/fold/xml-fold.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/edit/matchtags.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/edit/closetag.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/search/searchcursor.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/search/search.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/search/jump-to-line.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/dialog/dialog.min.js" defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.15/addon/dialog/dialog.min.css" />
<script src="assets/js/config.js"></script>
</body>
</html>
