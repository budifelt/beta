/* Base */
*{box-sizing:border-box}
html,body{height:100%}
body{
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  margin:0; display:flex; overflow:hidden;
  background:#0b1220; color:#e2e8f0;
}

/* Sidebar */
#sidebar{
  width:350px; background:#0f172a; color:#e2e8f0;
  display:flex; flex-direction:column; gap:12px; padding:20px;
  border-right:1px solid #1f2937;
}
#sidebar h2{margin:0 0 4px; font-size:1.25rem; font-weight:700; padding-bottom:10px; border-bottom:1px solid #1f2937}
#fileList{flex:1; overflow:auto; border-top:1px solid #1f2937; padding-top:10px}
#fileList ul{list-style:none; margin:0; padding:0}
#fileList li, #fileList button.file{
  display:flex; align-items:center; gap:10px; width:100%;
  padding:10px 12px 10px 36px; background:transparent; color:inherit;
  border:1px solid transparent; border-radius:10px; cursor:pointer; position:relative;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  transition:background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
#fileList li.folder::before{content:"üìÅ"; position:absolute; left:12px}
#fileList li.file::before, #fileList button.file::before{content:"üìÑ"; position:absolute; left:12px}
#fileList li:hover, #fileList button.file:hover{background:color-mix(in srgb, #6366f1 12%, transparent); border-color:color-mix(in srgb, #6366f1 35%, transparent)}
#fileList li.selected, #fileList button.file.selected,
#fileList li[aria-selected="true"], #fileList button.file[aria-selected="true"]{
  background:color-mix(in srgb, #6366f1 22%, #0f172a);
  border-color:color-mix(in srgb, #6366f1 60%, transparent);
  box-shadow:0 0 0 2px rgba(99,102,241,.35) inset;
}

/* Main */
#mainContent{
  flex:1; margin:20px; padding:20px; border:1px solid #1f2937; border-radius:12px;
  background:#0b1324; color:inherit; display:flex; flex-direction:column; gap:12px;
}
.header-row{display:flex; align-items:center; gap:10px}
#mainContent h1{margin:0; font-size:18px; font-weight:800}
.loading-inline{display:flex; align-items:center; gap:6px}
.pill{padding:2px 6px; background:#fff3cd; color:#111827; border:1px solid #ffe08a; border-radius:999px; font-size:12px}

#contentContainer{display:flex; gap:12px; min-height:0}
#databaseContent{
  flex:1; overflow:auto; background:#0e1628; border:1px solid #1f2937; border-radius:10px;
  white-space:pre; font-family:'Courier New',monospace; min-height:240px;
}
#resultsContainer{flex:1; display:flex; flex-direction:column; gap:12px; overflow:auto}
#krhredResults,#krhredDetails{
  background:#0e1628; border:1px solid #1f2937; border-radius:10px; padding:12px; white-space:pre-wrap; font-family:'Courier New',monospace;
}

/* Virtual scroller */
.virtual-scroll-container{position:relative; height:calc(100vh - 220px); overflow:auto}
.virtual-scroll-content{position:absolute; width:100%}

/* Buttons (UNIFIED) */
.btn{
  display:inline-flex; align-items:center; gap:.5rem; border-radius:10px;
  padding:8px 12px; border:1px solid #1f2937; background:#1f2937; color:#e2e8f0;
  font-weight:700; cursor:pointer; transition:background .15s, box-shadow .15s, transform .12s;
}
.btn:hover{background:#243042; border-color:color-mix(in srgb, #6366f1 35%, #1f2937)}
.btn:active{transform:translateY(1px)}
.btn-primary{
  background:color-mix(in srgb, #6366f1 22%, #0f172a);
  border-color:color-mix(in srgb, #6366f1 45%, transparent);
}
.btn-primary:hover{
  background:color-mix(in srgb, #6366f1 32%, #0f172a);
  box-shadow:0 0 0 2px rgba(99,102,241,.35) inset;
}
.load-more{align-self:flex-start}

/* Back to index */
.back-btn{
  position:fixed; bottom:16px; left:16px; width:42px; height:42px;
  border-radius:50%; border:1px solid #1f2937; background:#111826; color:#fff;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
  box-shadow:0 2px 6px rgba(0,0,0,.25); z-index:1000; transition:background .2s, transform .2s;
}
.back-btn:hover{background:#1b2432; transform:scale(1.06)}

/* Modal */
.modal{position:fixed; inset:0; display:none; z-index:1001}
.modal[open], .modal.show{display:block}
.modal-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.5); backdrop-filter:blur(2px)}
.modal-dialog{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  width:min(720px, calc(100vw - 32px)); background:#0b1324; color:#e2e8f0;
  border:1px solid #1f2937; border-radius:16px; padding:16px 16px 18px;
  box-shadow:0 20px 60px rgba(0,0,0,.45), 0 0 0 1px rgba(99,102,241,.35);
}
.modal-title{display:flex; align-items:center; gap:.6rem; font-size:18px; font-weight:800; margin:2px 4px 10px}
.modal-close{
  position:absolute; top:10px; right:12px; width:36px; height:36px; border-radius:10px;
  background:color-mix(in srgb, #6366f1 16%, #0f172a); border:1px solid #1f2937; color:#e2e8f0;
  display:flex; align-items:center; justify-content:center; cursor:pointer;
}
.modal-close:hover{background:color-mix(in srgb, #6366f1 26%, #0f172a)}
.modal-controls{display:flex; gap:10px; align-items:center; margin:6px 4px 12px; flex-wrap:wrap}
.input-group{
  flex:1 1 360px; display:flex; align-items:center; gap:.5rem;
  background:#0e1628; border:1px solid #1f2937; border-radius:10px; padding:10px 12px;
}
.input-group input{flex:1; background:transparent; border:none; outline:none; color:inherit; font-size:14px}
#modalResults{margin:6px 4px 0}

/* Per-entry rows */
.krhred-rows{display:flex; flex-direction:column; gap:6px; max-height:50vh; overflow:auto; padding-right:6px; font-family:'Courier New',monospace}
.krhred-row{
  display:flex; gap:8px; align-items:flex-start;
  padding:8px 10px; border:1px solid #1f2937; border-radius:10px;
  background:color-mix(in srgb, #6366f1 8%, transparent);
}
.krhred-row code{font-weight:800}
.krhred-row .value{white-space:pre-wrap; word-break:break-word}
.krhred-row .count{opacity:.9}

/* Scrollbar */
#fileList::-webkit-scrollbar, #databaseContent::-webkit-scrollbar, .krhred-rows::-webkit-scrollbar{width:10px}
#fileList::-webkit-scrollbar-thumb, #databaseContent::-webkit-scrollbar-thumb, .krhred-rows::-webkit-scrollbar-thumb{
  background:color-mix(in srgb, #6366f1 35%, #0b0f1c); border:3px solid #0b0f1c; border-radius:12px;
}


/* === Single-row flex layout === */
.krhred-rows{display:flex;flex-direction:column;gap:8px;max-height:50vh;overflow:auto;padding-right:6px;font-family:'Courier New',monospace}
.krhred-row{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  align-items:flex-start;
  padding:8px 10px;
  border:1px solid #1f2937;
  border-radius:10px;
  background:#0e1628;
}
.krhred-row code{font-weight:800;white-space:nowrap;}
.krhred-row .input.value{
  flex:1 1 auto;
  min-width:0;
  white-space:normal;
  word-break:break-word;
}
.value-long{color:#f87171;font-weight:700}
