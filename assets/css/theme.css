/* ===============================
   THEME v2 â€” Stable gradient + consistent panels
   =============================== */

/* ---- Tokens ---- */
:root{
  --bg1:#3940b8; --bg2:#5a3f8f;
  --surface:#0b1220; --surface-elev:#111827;
  --text:#e5e7eb; --text-strong:#f3f4f6; --muted:#9aa4b2;
  --ring:#7c89ff; --glow1:#667eea; --glow2:#764ba2;
  --radius:16px; --space:clamp(14px,2vw,24px); --container:1100px;
  --shadow:0 10px 28px rgba(0,0,0,.30);
  --shadow-lg:0 22px 60px rgba(20,30,60,.45);
}

/* ---- Base ---- */
html,body{height:100%}
body{
  color:var(--text) !important;
  font-family: ui-sans-serif, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, Arial, sans-serif !important;

  /* FIX: satu layer gradient yang stabil */
  background: linear-gradient(135deg, var(--bg1), var(--bg2)) !important;
  background-attachment: fixed !important;
}

/* Opsional: ubah ke latar solid di halaman yang butuh */
body.theme-solid{
  background: var(--surface) !important;
}

/* ---- Common containers / panels ---- */
.container, #mainContent, .calendar, .counter-container, .instructions, .history-container,
#sidebar, #fileList, #databaseContent, #resultsContainer, #krhredResults, #krhredDetails,
#contentContainer, #editor, textarea, input[type="text"], input[type="search"], select, .virtual-scroll-container {
  background: var(--surface) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,.08) !important;
  box-shadow: var(--shadow);
  border-radius: var(--radius);
  position: relative;
  overflow: hidden;
}

/* FIX: hilangkan blend-screen yang bikin tint berubah; pakai normal + opacity kecil */
.container::after, .calendar::after, .counter-container::after, #mainContent::after,
.instructions::after, .history-container::after{
  content:""; position:absolute; inset:-2px; border-radius:inherit; pointer-events:none;
  background:linear-gradient(135deg,var(--glow1),var(--glow2));
  opacity:.10;                /* lebih halus */
  mix-blend-mode: normal;     /* FIX: tadinya 'screen' */
}

/* Matikan glow di elemen tertentu bila perlu */
.no-glow::after{ display:none !important; }

/* ---- Headings & text ---- */
h1,h2,h3,h4,h5 { color: var(--text-strong) !important; }
p, label, .sync-status, .last-updated, .text-slate-400 { color: var(--muted) !important; }

/* ---- Buttons ---- */
button, .bookmarklet {
  background: var(--surface-elev) !important;
  color: var(--text) !important;
  border:1.5px solid rgba(255,255,255,.08) !important;
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow);
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
}
button:hover, .bookmarklet:hover {
  transform: translateY(-2px);
  background:#0f172a !important;
  border-color: rgba(124,137,255,.55) !important;
  box-shadow: var(--shadow-lg);
}

/* ---- Links ---- */
a { color: #9bb1ff !important; }

/* ---- Inputs & textareas ---- */
input, textarea, select {
  border-radius: var(--radius) !important;
  background: #0f172a !important;
  color: var(--text) !important;
  border:1px solid rgba(255,255,255,.10) !important;
}
input::placeholder, textarea::placeholder { color: #9aa4b2 !important; }

/* ---- Tables ---- */
table { color: var(--text) !important; }
th, td { border-color: rgba(255,255,255,.10) !important; }
thead { background: #0f172a !important; }

/* ---- Specific tweaks you already had (deduplicated) ---- */
#databaseContent { background:#0f172a !important; }
#krhredResults, #krhredDetails { background:#111827 !important; }
#sidebar, #fileList { box-shadow: none !important; }
::selection { background: rgba(124,137,255,.35); color:#fff; }

.back-btn{ position:fixed; bottom:16px; left:16px; top:auto; right:auto; }

@supports (bottom: env(safe-area-inset-bottom)){
  .back-btn{
    bottom: max(16px, calc(env(safe-area-inset-bottom) + 8px));
    left: max(16px, calc(env(safe-area-inset-left) + 8px));
  }
}
